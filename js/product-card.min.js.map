{"version":3,"file":"product-card.min.js","sources":["product-card.js"],"sourcesContent":["'use strict';\n\n(function () {\n  var PINK = '#d91667';\n  var GREY = '#666666';\n  var SELECTED_HOVER_OVERTITLE_TEXT = 'Котэ не одобряет?';\n\n  var defaultPromoWords = document.querySelector('.product-card__promo-words').innerHTML;\n\n  var selectedPromoWordsMap = {\n    'product-card--foie-gras': 'Печень утки разварная с артишоками.',\n    'product-card--fish': 'Головы щучьи с чесноком да свежайшая сёмгушка.',\n    'product-card--chicken': 'Филе из цыплят с трюфелями в бульоне.'\n  }\n\n  var disabledPromoWordsMap = {\n    'product-card--foie-gras': 'Печалька, с фуа-гра закончился.',\n    'product-card--fish': 'Печалька, с рыбой закончился.',\n    'product-card--chicken': 'Печалька, с курой закончился.'\n  }\n\n  var productList = document.querySelector('.products__list');\n\n  var defaultOvertitleText = document.querySelector('.product-card__overtitle').textContent;\n\n  var isNotPromoWords = function (elem) {\n    return !elem.classList.contains('product-card__promo-words') || elem.classList.contains('product-card__buy-word');\n  }\n\n  var getParentByClassName = function (elem, parentClassName) {\n    var currentElem = elem;\n    while (currentElem !== document && !currentElem.classList.contains(parentClassName)) {\n      currentElem = currentElem.parentNode;\n    }\n    if (currentElem === document || !currentElem.classList.contains(parentClassName)) {\n      return null;\n    }\n    return currentElem;\n  }\n\n  var setOvertitle = function (overtitle, overtitleText, overtitleColor) {\n    overtitle.textContent = overtitleText;\n    overtitle.style.color = overtitleColor;\n  }\n\n  var onProductCardClick = function (target, productCard) {\n    if (target.classList.contains('product-card__buy-word')) {\n      productCard.classList.remove('product-card--default-hover');\n    }\n    var overtitle = productCard.querySelector('.product-card__overtitle');\n    var promoWords = productCard.querySelector('.product-card__promo-words');\n    if (productCard.classList.contains('product-card--selected')) {\n      setOvertitle(overtitle, defaultOvertitleText, GREY);\n      promoWords.innerHTML = defaultPromoWords;\n    } else {\n      promoWords.textContent = selectedPromoWordsMap[productCard.classList[2]];\n    }\n    productCard.classList.toggle('product-card--selected');\n  }\n\n  var onProductCardEventsBody = function (target, onProductCardEvent, overtitleText, overtitleColor) {\n    if (isNotPromoWords(target)) {\n      var productCard = getParentByClassName(target, 'product-list__card');\n      if (productCard !== null) {\n        if (!productCard.classList.contains('product-card--disabled')) {\n          onProductCardEvent(target, productCard, overtitleText, overtitleColor);\n        }\n      }\n    }\n  }\n\n  productList.addEventListener('click', function (evt) {\n    onProductCardEventsBody(evt.target, onProductCardClick);\n  });\n\n  var onProductCardOverOut = function (target, productCard, overtitleText, overtitleColor) {\n    var overtitle = productCard.querySelector('.product-card__overtitle');\n    if (productCard.classList.contains('product-card--selected')) {\n      setOvertitle(overtitle, overtitleText, overtitleColor);\n    }\n    productCard.classList.toggle('product-card--default-hover');\n  }\n\n  productList.addEventListener('mouseover', function (evt) {\n    onProductCardEventsBody(evt.target, onProductCardOverOut, SELECTED_HOVER_OVERTITLE_TEXT, PINK);\n  });\n\n  productList.addEventListener('mouseout', function (evt) {\n    onProductCardEventsBody(evt.target, onProductCardOverOut, defaultOvertitleText, GREY);\n  });\n\n  var disableProductCard = function (productCard) {\n    productCard.classList.add('product-card--disabled');\n    var promoWords = productCard.querySelector('.product-card__promo-words');\n    promoWords.textContent = disabledPromoWordsMap[productCard.classList[2]];\n  }\n\n  var makeAbledProductCard = function (productCard) {\n    productCard.classList.remove('product-card--disabled');\n    var promoWords = productCard.querySelector('.product-card__promo-words');\n    promoWords.innerHTML = defaultPromoWords;\n  }\n\n  var chickenProductCard = document.querySelector('.product-card--chicken');\n\n  disableProductCard(chickenProductCard);\n})();\n"],"names":["setOvertitle","overtitle","overtitleText","overtitleColor","textContent","style","color","onProductCardClick","target","productCard","classList","contains","remove","querySelector","promoWords","defaultOvertitleText","GREY","innerHTML","defaultPromoWords","selectedPromoWordsMap","toggle","onProductCardEventsBody","onProductCardEvent","elem","parentClassName","currentElem","document","parentNode","getParentByClassName","product-card--foie-gras","product-card--fish","product-card--chicken","disabledPromoWordsMap","productList","addEventListener","evt","onProductCardOverOut","chickenProductCard","add"],"mappings":"cAEA,WAsCqB,SAAfA,EAAyBC,EAAWC,EAAeC,GACrDF,EAAUG,YAAcF,EACxBD,EAAUI,MAAMC,MAAQH,EAGD,SAArBI,EAA+BC,EAAQC,GACrCD,EAAOE,UAAUC,SAAS,2BAC5BF,EAAYC,UAAUE,OAAO,+BAE/B,IAAIX,EAAYQ,EAAYI,cAAc,4BACtCC,EAAaL,EAAYI,cAAc,8BACvCJ,EAAYC,UAAUC,SAAS,2BACjCX,EAAaC,EAAWc,EAAsBC,GAC9CF,EAAWG,UAAYC,GAEvBJ,EAAWV,YAAce,EAAsBV,EAAYC,UAAU,IAEvED,EAAYC,UAAUU,OAAO,0BAGD,SAA1BC,EAAoCb,EAAQc,EAAoBpB,EAAeC,GACjF,IACMM,EArCwBc,GAAAA,EAoCVf,GAnCPE,UAAUC,SAAS,+BAAgCY,EAAKb,UAAUC,SAAS,2BAqClE,QADhBF,EAjCmB,SAAUc,EAAMC,GAEzC,IADA,IAAIC,EAAcF,EACXE,IAAgBC,WAAaD,EAAYf,UAAUC,SAASa,IACjEC,EAAcA,EAAYE,WAE5B,OAAIF,IAAgBC,UAAaD,EAAYf,UAAUC,SAASa,GAGzDC,EAFE,KA2BWG,CAAqBpB,EAAQ,yBAExCC,EAAYC,UAAUC,SAAS,2BAClCW,EAAmBd,EAAQC,EAAaP,EAAeC,IA9D/D,IACIa,EAAO,UAGPE,EAAoBQ,SAASb,cAAc,8BAA8BI,UAEzEE,EAAwB,CAC1BU,0BAA2B,sCAC3BC,qBAAsB,iDACtBC,wBAAyB,yCAGvBC,EAAwB,CAC1BH,0BAA2B,kCAC3BC,qBAAsB,gCACtBC,wBAAyB,iCAGvBE,EAAcP,SAASb,cAAc,mBAErCE,EAAuBW,SAASb,cAAc,4BAA4BT,YAgD9E6B,EAAYC,iBAAiB,QAAS,SAAUC,GAC9Cd,EAAwBc,EAAI3B,OAAQD,KAGX,SAAvB6B,EAAiC5B,EAAQC,EAAaP,EAAeC,GACvE,IAAIF,EAAYQ,EAAYI,cAAc,4BACtCJ,EAAYC,UAAUC,SAAS,2BACjCX,EAAaC,EAAWC,EAAeC,GAEzCM,EAAYC,UAAUU,OAAO,+BAG/Ba,EAAYC,iBAAiB,YAAa,SAAUC,GAClDd,EAAwBc,EAAI3B,OAAQ4B,EA/EF,oBAFzB,aAoFXH,EAAYC,iBAAiB,WAAY,SAAUC,GACjDd,EAAwBc,EAAI3B,OAAQ4B,EAAsBrB,EAAsBC,KAGlF,IAAmCP,EAY/B4B,EAAqBX,SAASb,cAAc,2BAZbJ,EAchB4B,GAbL3B,UAAU4B,IAAI,0BACT7B,EAAYI,cAAc,8BAChCT,YAAc4B,EAAsBvB,EAAYC,UAAU,IA5FzE"}